/*!
 * codeBadges v1.0.3 (https://codemzy.github.io/codebadges)
 * Copyright 2018 codemzy
 * Licensed under MIT
 */
if("undefined"==typeof jQuery)throw new Error("codeBadges JavaScript requires jQuery. jQuery must be included before codeBadges JavaScript.");!function(t,e){var a=function(t){return e(".code-badge").html('<div class="outer"><div class="inner"><div class="loader"><div class="loading"></div><div class="loading-text">Loading...</div></div></div></div>'),new a.init(t)},o={codecademy:!0,codeschool:!0,codewars:!0,freecodecamp:!0,github:!0,treehouse:!0},s='<div class="margin-top big">-</div><div class="small">-</div><div id="user">User</div><div class="small">Not Found</div>',n=function(t,e){var a=e.small?"smaller":"";return'<div class="margin-top big">'+t.top+'</div><div class="small">'+t.top_type+'</div><div class="user '+a+'">'+e.name+'</div><div class="small">'+t.user_type+'</div><div class="small margin-top">'+t.bottom_type+"</div><div><span>"+t.bottom+'</span></div><div class="small">since <span id="date">'+t.date+"</span></div>"};a.prototype={_get:{_codecademyAPI:function(t,a){var o="https://www.codecademy.com/"+t;e.get(o,function(t){var e=t.match(/<p>Skills completed<\/p>[\s|\S]*?<h3>([\s|\S]*?)<\/h3>[\s|\S]*?<p>Badges<\/p>/m)[1],o=t.match(/<h3 class="padding-right--quarter">([\s|\S]*?)<\/h3>[\s|\S]*?<small>total points<\/small>/m)[1],s=t.match(/<small class="text--ellipsis">Joined([\s|\S]*?)<\/small>/m)[1].split(", ")[1];a(!1,{top:parseInt(e,10),top_type:"badges",user_type:"Codecademy Student",bottom:o,bottom_type:"Points",date:s})}).fail(function(){a("error")})},_codeschoolAPI:function(t,a){var o="https://www.codeschool.com/users/"+t+".json";e.ajax({type:"GET",dataType:"jsonp",url:o}).done(function(t){var e=t.badges.length,o=t.user.total_score,s=t.user.member_since.split("-")[0];a(!1,{top:e,top_type:"badges",user_type:"CodeSchool Student",bottom:o,bottom_type:"Score",date:s})}).fail(function(){a("error")})},_codewarsAPI:function(t,a){var o="https://cors-anywhere.herokuapp.com/https://www.codewars.com/users/"+t;e.get(o,function(t){var e=t.match(/Honor:<\/b>(.+?)<\/div>/m)[1],o=t.match(/Rank:<\/b>(.+?)<\/div>/m)[1],s=t.match(/Member Since:<\/b>(.+?)<\/div>/m)[1].split(" ")[1];a(!1,{top:e,top_type:"honor",user_type:"CodeWars Member",bottom:o,bottom_type:"Rank",date:s})}).fail(function(){a("error")})},_freecodecampAPI:function(t,a){var o="https://www.freecodecamp.org/"+t;e.get(o,function(t){for(var o=t.match(/<h1 class="flat-top text-primary">\[ ([\s|\S]*?) \]<\/h1>/)[1],s=t.replace(/<thead>[\s|\S]*?<\/thead>/g).match(/<tr>/g).length+" challenges",n=t.match(/<table[\s|\S]*?<\/table>/g).join(" "),i=e(n).find("tbody").find("tr:first td:eq(1)"),r=[],d=0;d<3;d++)r.push(parseInt(e(i[d]).text().split(",")[1],10));r.sort(function(t,e){return t-e});var c=r[0];a(!1,{top:parseInt(o,10),top_type:"points",user_type:"FreeCodeCamp Student",bottom:s,bottom_type:"Completed",date:c})}).fail(function(){a("error")})},_githubAPI:function(t,a){var o="https://api.github.com/users/"+t;e.get(o,function(t){var e=t.followers,o=t.public_repos+" public repos",s=t.created_at.split("-")[0];a(!1,{top:e,top_type:"followers",user_type:"GitHub User",bottom:o,bottom_type:"Created",date:s})}).fail(function(){a("error")})},_treehouseAPI:function(t,a){var o="https://teamtreehouse.com/"+t+".json";e.get(o,function(t){var e=t.points.total,o=t.badges.length+" achievements",s=t.badges&&t.badges.length>0?t.badges[0].earned_date.split("-")[0]:"-";a(!1,{top:e,top_type:"points",user_type:"Treehouse Student",bottom:o,bottom_type:"Completed",date:s})}).fail(function(){a("error")})}},_html:{badgeDisplay:function(t,a,o){var s=this.nameDisplay(o),i=n(a,s);return e(".code-badge."+t+" .inner").html(i),i},badgeError:function(t){return e(".code-badge."+t+" .inner").html(s),s},nameDisplay:function(t){return t.length>10?t.length>16?{name:t.slice(0,13)+"...",small:!0}:{name:t,small:!0}:{name:t,small:!1}}},_validate:{checkName:function(t){return("string"==typeof t||t instanceof String)&&t.length<150&&t},checkBadge:function(t){return!!o[t]&&t}},anyBadge:function(t,e){var a=this._validate.checkName(e)||this.name;this.lastName=a;var o=this._validate.checkBadge(t);return this.lastBadge=o,o&&a?this._get["_"+o+"API"](a,function(t,e){t?t&&this._html.badgeError(o):this._html.badgeDisplay(o,e,a)}.bind(this)):this._html.badgeError(o),this},codecademy:function(t){return this.anyBadge("codecademy",t)},codeschool:function(t){return this.anyBadge("codeschool",t)},codewars:function(t){return this.anyBadge("codewars",t)},freecodecamp:function(t){return this.anyBadge("freecodecamp",t)},github:function(t){return this.anyBadge("github",t)},treehouse:function(t){return this.anyBadge("treehouse",t)}},a.init=function(t){this._validate.checkName(t)&&(this.name=t||"codemzy")},a.init.prototype=a.prototype,t.codeBadges=a}(window,jQuery);